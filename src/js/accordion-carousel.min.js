/**
 * Created by oven.zhang on 2017/4/26.
 */
"use strict";function accordionCarousel(i){this.imgNumber=i.data.length,this.indexPrevReady=0,this.indexPrev=1,this.indexCurrent=2,this.indexNext=3,this.indexNextReady=4,this.wrap=i.wrap||$("body"),this.data=i.data,this.imgContainer,this.switchContainer,this.indexLastActived=0,this.init(i.data)}accordionCarousel.prototype={constructor:accordionCarousel,init:function(i){for(var t="",e="",s="",n=i.length,r=0;r<n;r++){switch(r){case 0:e='<div class="img-item prev-img-ready" position = "prevReady"><img src="'+i[r].img+'"></div>';break;case 1:e='<div class="img-item prev-img" position = "prev"><img src="'+i[r].img+'"></div>';break;case 2:e='<div class="img-item current-img" position = "current"><img src="'+i[r].img+'"></div>';break;case 3:e='<div class="img-item next-img" position = "next"><img src="'+i[r].img+'"></div>';break;case 4:e='<div class="img-item next-img-ready" position = "nextReady"><img src="'+i[r].img+'"></div>';break;default:e='<div class="img-item other-img"><img src="'+i[r].img+'"></div>'}t+=e}for(var d=0;d<n;d++){s+='<li class = "switch-item" index = "'+d+'"></li>'}this.wrap.innerHTML='<div class = "carousel"><div class = "img-list" id="imgList">'+t+'</div><div class = "switch-box" id="switchBox"><ul>'+s+"</ul></div></div>",this.imgContainer=document.getElementById("imgList").getElementsByTagName("div"),this.switchContainer=document.getElementById("switchBox").getElementsByTagName("li"),this.bindEvent(),this.switchActivedItemColor()},bindEvent:function(){var i=document.getElementById("imgList"),t=document.getElementById("switchBox");i.addEventListener("click",this.switchByClick.bind(this)),t.addEventListener("mouseover",this.switchByItem.bind(this))},switchByClick:function(i){var t=i.target.parentNode.getAttribute("position");if("current"===t)return void(window.location=this.data[this.indexCurrent].url);"next"===t?(this.indexPrevReady=this.indexPrevReady>=this.imgNumber-1?0:++this.indexPrevReady,this.indexPrev=this.indexPrev>=this.imgNumber-1?0:++this.indexPrev,this.indexCurrent=this.indexCurrent>=this.imgNumber-1?0:++this.indexCurrent,this.indexNext=this.indexNext>=this.imgNumber-1?0:++this.indexNext,this.indexNextReady=this.indexNextReady>=this.imgNumber-1?0:++this.indexNextReady):"prev"===t&&(this.indexPrevReady=this.indexPrevReady<=0?this.imgNumber-1:--this.indexPrevReady,this.indexPrev=this.indexPrev<=0?this.imgNumber-1:--this.indexPrev,this.indexCurrent=this.indexCurrent<=0?this.imgNumber-1:--this.indexCurrent,this.indexNext=this.indexNext<=0?this.imgNumber-1:--this.indexNext,this.indexNextReady=this.indexNextReady<=0?this.imgNumber-1:--this.indexNextReady),this.switchPic()},switchByItem:function(i){var t=i.target.getAttribute("index");t&&(this.indexCurrent=Number(t),this.indexPrevReady=this.indexCurrent-2<0?this.imgNumber-(2-this.indexCurrent):this.indexCurrent-2,this.indexPrev=this.indexCurrent-1<0?this.imgNumber-1:this.indexCurrent-1,this.indexNext=this.indexCurrent+1>this.imgNumber-1?0:this.indexCurrent+1,this.indexNextReady=this.indexCurrent+2>this.imgNumber-1?this.indexCurrent+2-this.imgNumber:this.indexCurrent+2,this.switchPic())},switchPic:function(){this.imgContainer[this.indexPrevReady].setAttribute("class","img-item prev-img-ready"),this.imgContainer[this.indexPrev].setAttribute("class","img-item prev-img"),this.imgContainer[this.indexPrev].setAttribute("position","prev"),this.imgContainer[this.indexCurrent].setAttribute("class","img-item current-img"),this.imgContainer[this.indexCurrent].setAttribute("position","current"),this.imgContainer[this.indexNext].setAttribute("class","img-item next-img"),this.imgContainer[this.indexNext].setAttribute("position","next"),this.imgContainer[this.indexNextReady].setAttribute("class","img-item next-img-ready"),this.switchActivedItemColor()},switchActivedItemColor:function(){this.switchContainer[this.indexLastActived].setAttribute("class","switch-item"),this.switchContainer[this.indexCurrent].setAttribute("class","switch-item item-actived"),this.indexLastActived=this.indexCurrent}};
